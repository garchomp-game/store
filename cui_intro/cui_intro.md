# コマンドプロンプト入門

## 対象者
日常用途以外の難しい操作をした事のない、Windowsユーザー。

## GUIとCUI
- GUI(Graphical User Interface)
  - 絵付きの画面
  - マウスでカチカチして操作
  - 直感的
- CUI(Character User Interface)
  - 文字のみの画面
  - 所謂黒い画面
  - コマンドで操作
  - 出力結果も全部文字のみ

## cmd  
- (ちょっと違うけど、)cmdはExplorerの、CUI版のようなもの  
厳密にいうと、  
```
cmdはCUIツールであり、ExplorerのCUI版としての機能も兼ねてる
```
という感じ

![image](./img/explorer_cmd.png)

- 起動方法  
`Win+R→cmd→Enter`が一番モテるやり方

#### パスについて(絶対パスと相対パス)  
パスとは、ファイルやフォルダの場所のこと。
```
例) デスクトップのパス
C:\Users\ユーザ名\Desktop
```
- 絶対パス(フルパス)  
一番上から全部指定するやり方。  
(上の例とかも絶対パスやね)
```
C:¥フォルダ名¥フォルダ名¥フォルダ名¥ファイル名.jpg
```

- 相対パス  
カレントディレクトリ(今いるディレクトリ)から見たパスの指定方法。  
以下を使用する
  - カレントディレクトリ: `.`
  ```
  例) カレントディレクトリ内にあるtest.txtというファイル
  ./test.txt
  ```
  - 親ディレクトリ(一個上のディレクトリ): `..`
  ```
  例) 親ディレクトリにあるtest.txtというファイル
  ../test.txt
  ```

#### 超初歩的なコマンド
- `echo`  
→何をやるにもまずは"Hello, World!!"でしょ
```bat
echo "Hello, World!!"
```
- ファイル操作系
  - `dir`  
  カレントディレクトリ上のディレクトリやファイルを表示する。
  - `tree`  
  カレントディレクトリ以下のディレクトリやファイルをツリー上に表示する。
  - `cd`(change directory)  
  ```bat
  rem 書式
  cd 移動先のパス
  ```
  - `mkdir`(make directory)  
  ディレクトリを作成する。
  ```bat
  rem 書式
  mkdir 作成するディレクトリ名
  ```
  - `copy`  
  ファイルをコピーする。  
  ディレクトリのコピーも多分いけるけど、普段cmd使わないから忘れた。調べといて。
  ```bat
  rem 書式
  copy コピーするファイル コピー先
  ```
  - `del`
  - `move`
- `explorer`  
→explorerを開くコマンド…
```bat
rem 例) カレントディレクトリでExplorerを開く
explorer .
```

#### リダイレクト  
→コマンドの出力結果をテキストファイルに焼くこと。  
- `>`と`>>`がある。  
使い方例↓
```bat
rem ">"
echo "Hello, World!!" > hello.txt
rem ">"はそのまま上書きしてしまう(さっき入れた内容は消えてしまう。)
echo "hoge" > hello.txt
rem 上書きじゃなくて追記したいときは">>"を使う。
echo "追記だよー" >> hello.txt
```
- treeコマンドの出力結果をテキストに焼いてみる
```bat
tree > tree.txt
```

#### ここまでの内容で一旦例題
**注意: ディレクトリへの移動は特に書きません。自分で考えて都度移動してください。**  
**注意: ディレクトリを移動したら常に`dir`コマンドを打つことを心がけてください。**  

0. cmdを起動する

1. デスクトップに、中身が"hello"のテキストファイルを作成する(ファイル名: hello.txt)。

2. "test_202311XX"というディレクトリを作成する。(XXには日付を入れる)

3. デスクトップにある`hello.txt`を`test_202311XX\`に移動する。

4. `test_202311XX\`内で、hello.txtをコピーして、以下のファイルを作成する。
```
hello_01.txt
hello_02.txt
hello_03.txt
hello_04.txt
hello_05.txt
```

5. `test_202311XX\`内に、`test`というフォルダを作成する。

6. `test_202311XX\`内のテキストファイルを全て`test_202311XX\test\`に移動する。

7. `tree`コマンドの出力結果を`test_202311XX\tree.txt`というファイルに出力する。

#### 環境変数と`%PATH%`  
これは多分まだ難しいとは思うけど、大事だから頑張ってみる
  - 環境変数  
  プログラミングでいうところの変数と同じ。  
  システムを動かすのに必要な情報が変数として保持されている。  
  cmdでは変数は`%変数名%`で呼びだせる。  
  例えば、`%username%`という環境変数の中身を見るには、
  ```bat
  echo %username%
  ```
  とすれば良い。
  - `%PATH%`
  `%PATh%`というのは、環境変数の中でも、特に重要なやつ。
  - 現在設定されている環境変数を確認する  
  →`set`コマンドを叩く。

#### ネットワーク系のコマンド  
ネットワーク系のコマンドを使いこなすと、ハッカー気分を味わえる。
  - `ping`  
  通信できてるかをテストするコマンド。一番使う。  
  ```bat
  rem 例) LAN外に出れてるかをサクっと確かめたい時、よくやるのは、googleにpingするってやつ
  ping www.google.com
  ```
  - `tracert`(trace route)  
  行き先までに経由した箇所を全部表示してくれるコマンド。  
  通信できてないときに、どこまで通信できてるかを見たりするのによく使う。
  ```bat
  rem 例)
  tracert www.google.com
  ```
  - `ipconfig`  
  IPアドレスなどの情報を表示する。

#### バッチファイルについて  
コマンドプロンプトは対話的に1行1行コマンドを実行したよね。  
これらのコマンドをテキストファイルとしてまとめて、一気に実行することができる。  
このテキストファイルが**バッチファイル**。(**拡張子は`*.bat`**)  
バッチファイルを作ることで色々な作業を自動化することができる。  
**TODO: 解説は後で書く**

#### バッチファイルの例題  
以下のサイトに載っているバッチファイルを仕様変更する。  
知らない事いっぱい出てくると思うけど、全部自分で調べて！  

http://blog.livedoor.jp/shige19840901/archives/51644565.html

```bat
echo off
REM 年月日の名前でフォルダを作成するバッチファイル

REM 作成したい場所を指定
cd "C:\Documents and Settings\"

for /F "tokens=1-1 delims=/ " %%a in ('date /t') do SET YT=%%a
for /F "tokens=2-2 delims=/ " %%a in ('date /t') do SET MT=%%a
for /F "tokens=3-3 delims=/ " %%a in ('date /t') do SET DT=%%a

rem set /a DT= %DT%-1 rem 前日の日付にしたいならコレ
rem echo %DT%

REM 当日のフォルダ作成
md %YT%%MT%%DT%

pause

REM 当日のフォルダを開く
explorer %YT%%MT%%DT%
```

- 現状の動き  
2011年1月6日に実行すれば、"20110106"  
というフォルダで作成される。

- 仕様変更
  - フォルダ作成場所をDesktopに変更
  - "20110106"ではなく、"20110106_01"となるように
  - 何回実行しても、連番で新しいフォルダを作るように
  ```
  "20110106_01"
  "20110106_02"
  "20110106_03"
  ```

## おまけ: LinuxのCUI(bash)
cmdはWindows用。  
bashというのは、cmdのLinux版だと思ってくれれば。  
この前おとかさんが教えてくれたのは、この話のはず。  
